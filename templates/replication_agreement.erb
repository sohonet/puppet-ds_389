dn: cn=<%= @name %> to <%= @replica %> agreement,cn=replica,cn="<%= @suffix %>",cn=mapping tree,cn=config
changetype: add
objectClass: top
objectClass: nsDS5ReplicationAgreement
cn: <%= @name %> to <%= @replica %> agreement
nsDS5ReplicaHost: <%= @replica %>
nsDS5ReplicaPort: <%= @replica_port %>
nsDS5ReplicaTransportInfo: <%= @replica_transport %>
nsDS5ReplicaBindDN: <%= @_bind_dn %>
nsDS5ReplicaBindMethod: SIMPLE
nsDS5ReplicaCredentials: <%= @replication_pass %>
nsDS5ReplicaRoot: <%= @suffix %>
description: replication agreement from <%= @name %> to <%= @replica %>
<%- if @attribute_list -%>
nsDS5ReplicatedAttributeList: (objectclass=*) $ EXCLUDE <%= @attribute_list %>
<%- end -%>

<%- if @replica_transport == 'SSL' -%>
dn: cn=config
changetype: modify
replace: nsslapd-ssl-check-hostname
nsslapd-ssl-check-hostname: off
<%- end -%>
